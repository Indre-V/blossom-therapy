{% load static %}
<div class="card p-3 mb-3">
    <div class="row g-0">
        <div class="col-md-6">
            <div class="bg-image position-relative hover-overlay" data-mdb-ripple-color="light">
                {% if "placeholder" in post.featured_image.url %}
                    <a href="{% url 'insight-details' post.slug %}" class="card-link">
                        <img class="list-img rounded img-fluid w-100" src="{% static 'images/default.jpg' %}" alt="placeholder image">
                    </a>
                {% else %}
                    <a href="{% url 'insight-details' post.slug %}" class="card-link">
                        <img src="{{ post.featured_image.url }}" class="list-img img-fluid w-100" alt="Insight Photo {{ post.title }}" loading="lazy">
                    </a>
                {% endif %}
            </div>
        </div>
        <div class="col-md-6">
            <div class="card-body d-flex flex-column justify-space-between">
                <div>
                    <h3 class="text-secondary mb-2">
                        <a href="{% url 'category-posts' post.category.name %}">{{ post.category.name }}</a>
                    </h3>
                    <hr class="hr hr-blurry" 
                    <p><a href="{% url 'insight-details' post.slug %}">{{ post.title }}</a></p>
                   
                </div>
                <hr class="hr hr-blurry">
            </div>
        </div>
        <div class="d-flex align-items-center author">
            <div class="avatar me-3">
                {% if "placeholder_profile" in post.author.profile.profile_picture.url %}
                    <img src="{% static 'images/placeholder_profile.jpg' %}" class="author-image" alt="Profile Placeholder" loading="lazy">
                {% else %}
                    <img src="{{ post.author.profile.profile_picture.url }}" class="author-image" alt="{{ post.author.username }}" loading="lazy">
                {% endif %}
            </div>
            <div class="media-body p-2">
                <a href="{% url 'public-profile' post.author.username %}" class="mb-0"><h4>by {{ post.author.username }}</h4></a>
                <h5 class="text-muted">{{ post.created_on|date:"F j, Y" }}</h5>
            </div>
            {% if request.user == post.author or request.user.is_superuser %}
                {% include 'includes/delete_modal.html' %}
                <a href="{% url 'insight-update' post.slug %}" type="button" class="btn btn-warning icon ml-2" title="Edit">
                    <i class="fa fa-pencil-square" aria-hidden="true"></i>
                </a>
            {% endif %} </div>
            <hr class="hr hr-blurry">
            {% if post.status == 0 %}
            <h4 class="text-center mb-4 pb-2 text-warning">
                This Post is waiting for admin approval.
            </h4>
        {% else %}
        <div class="d-flex justify-content-center m-3">
            <div class="d-flex align-items-center">
                <!-- Like Button and Count -->
                <form class="d-inline" action="{% url 'like-insight' post.slug %}" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="post_id" value="{{ post.slug }}">
                    <button type="submit" class="btn icon" aria-label="Like and Unlike">
                        {% if liked %}
                        <i class="fa-solid fa-thumbs-up"></i>
                        {% else %}
                        <i class="fa-regular fa-thumbs-up"></i>
                        {% endif %}
                    </button>
                </form>
                <span class="badge bg-white text-dark p-2 ms-1">{{ post.count_likes }}</span>
            </div>
        
            <div class="d-flex align-items-center ms-3">
                <!-- Favourite Button and Count -->
                <form class="d-inline" action="{% url 'favourite-insight' post.slug %}" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="post_id" value="{{ post.slug }}">
                    <button type="submit" class="btn icon" aria-label="Favourite and Unfavourite">
                        {% if favourited %}
                        <i class="fa-solid fa-heart" aria-hidden="true"></i>
                        {% else %}
                        <i class="fa-regular fa-heart" aria-hidden="true"></i>
                        {% endif %}
                    </button>
                </form>
                <span class="badge bg-white text-dark p-2 ms-1">{{ post.count_favs }}</span>
            </div>
        
            <div class="d-flex align-items-center ms-3">
                <!-- Comment Count -->
                <i class="fa fa-comment-o me-2"></i>
                <span class="d-inline">{{ post.comments.count }}</span>
            </div>
        </div>
    </div>
        {% endif %}
    </div>
    <script src="https://kit.fontawesome.com/27545168c5.js" crossorigin="anonymous"></script>
